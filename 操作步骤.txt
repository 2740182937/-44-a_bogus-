====================================================================
å¦‚ä½•ä½¿ç”¨ a_bogusç®—æ³• å’Œ è®¾å¤‡æŒ‡çº¹ç”Ÿæˆ
====================================================================

æ–‡ä»¶å¤¹ä½ç½®:
/Users/cds-dn-141/Downloads/my_golang/cx-spider/python_version/

====================================================================
ç¬¬ä¸€æ­¥: å®‰è£…ä¾èµ– (åªéœ€è¦æ‰§è¡Œä¸€æ¬¡)
====================================================================

cd /Users/cds-dn-141/Downloads/my_golang/cx-spider/python_version
pip install -r requirements.txt

ä¾èµ–åŒ…:
  - pycryptodome (RC4åŠ å¯†)
  - gmssl (SM3å›½å¯†ç®—æ³•)
  - requests (HTTPè¯·æ±‚)

====================================================================
ç¬¬äºŒæ­¥: è¿è¡Œæµ‹è¯• (éªŒè¯ç®—æ³•æ­£ç¡®)
====================================================================

python3 simple_test.py

é¢„æœŸè¾“å‡º:
  âœ“ a_bogusåŸºç¡€åŠŸèƒ½: é€šè¿‡
  âœ“ å¸¦bodyçš„POSTè¯·æ±‚: é€šè¿‡
  âœ“ æ—¶é—´æˆ³å˜åŒ–æµ‹è¯•: é€šè¿‡
  âœ“ æ€§èƒ½æµ‹è¯•: é€šè¿‡
  âœ“ è®¾å¤‡æŒ‡çº¹ç”Ÿæˆ: é€šè¿‡
  âœ“ é›†æˆæµ‹è¯•: é€šè¿‡
  
  æ€»è®¡: 6/6 é€šè¿‡
  ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡!

====================================================================
ç¬¬ä¸‰æ­¥: ä½¿ç”¨ç®—æ³• (ä¸¤ç§æ–¹å¼)
====================================================================

æ–¹å¼1: ç›´æ¥åœ¨Pythonä»£ç ä¸­ä½¿ç”¨
--------------------------------------------------------------------

åˆ›å»ºæ–‡ä»¶ my_test.py:

    from a_bogus import generate_a_bogus
    from device_fingerprint import generate_device_fingerprint
    
    # ç”Ÿæˆè®¾å¤‡æŒ‡çº¹
    fp = generate_device_fingerprint()
    
    # ç”Ÿæˆa_bogusç­¾å
    query = "device_platform=webapp&aid=6383"
    a_bogus = generate_a_bogus(query, "", fp['user_agent'])
    
    print(f"a_bogus: {a_bogus}")
    print(f"SVWebId: {fp['sv_web_id']}")
    print(f"msToken: {fp['ms_token']}")

è¿è¡Œ:
    python3 my_test.py


æ–¹å¼2: åœ¨å‘½ä»¤è¡Œä¸­å¿«é€Ÿæµ‹è¯•
--------------------------------------------------------------------

python3 -c "
from a_bogus import generate_a_bogus
from device_fingerprint import generate_device_fingerprint

fp = generate_device_fingerprint()
query = 'device_platform=webapp&aid=6383'
a_bogus = generate_a_bogus(query, '', fp['user_agent'])

print('a_bogus:', a_bogus)
print('SVWebId:', fp['sv_web_id'])
"

====================================================================
ç¬¬å››æ­¥: å®é™…åº”ç”¨ (å‘é€HTTPè¯·æ±‚)
====================================================================

åˆ›å»ºæ–‡ä»¶ send_request.py:

    import requests
    from a_bogus import generate_a_bogus
    from device_fingerprint import generate_device_fingerprint
    
    # 1. ç”Ÿæˆè®¾å¤‡æŒ‡çº¹
    fp = generate_device_fingerprint()
    
    # 2. æ„é€ queryå‚æ•°
    params = {
        "device_platform": "webapp",
        "aid": "6383",
        "channel": "channel_pc_web",
        "msToken": fp['ms_token'],
        "verifyFp": fp['sv_web_id'],
    }
    query = "&".join([f"{k}={v}" for k, v in params.items()])
    
    # 3. ç”Ÿæˆa_bogusç­¾å
    a_bogus = generate_a_bogus(query, "", fp['user_agent'])
    
    # 4. æ„é€ å®Œæ•´URL
    url = f"https://buyin.jinritemai.com/api/xxx?{query}&a_bogus={a_bogus}"
    
    # 5. æ„é€ Headerså’ŒCookies
    headers = {
        "User-Agent": fp['user_agent'],
        "Accept": "application/json",
        "Referer": "https://buyin.jinritemai.com/",
    }
    
    cookies = {
        "__ac_nonce": fp['nonce'],
        "__ac_signature": fp['signature'],
        "ttwid": fp['ttwid'],
        "s_v_web_id": fp['sv_web_id'],
    }
    
    # 6. å‘é€è¯·æ±‚
    response = requests.get(url, headers=headers, cookies=cookies)
    print(response.json())

====================================================================
å¸¸è§é—®é¢˜
====================================================================

Q1: å¦‚ä½•åªç”Ÿæˆa_bogusç­¾å?
A1: 
    from a_bogus import generate_a_bogus
    
    query = "device_platform=webapp&aid=6383"
    body = ""  # GETè¯·æ±‚ä¸ºç©º,POSTè¯·æ±‚å¡«JSONå­—ç¬¦ä¸²
    ua = "Mozilla/5.0 ..."
    
    a_bogus = generate_a_bogus(query, body, ua)
    print(a_bogus)


Q2: å¦‚ä½•åªç”Ÿæˆè®¾å¤‡æŒ‡çº¹?
A2:
    from device_fingerprint import generate_device_fingerprint
    
    fp = generate_device_fingerprint()
    
    print(f"SVWebId: {fp['sv_web_id']}")
    print(f"msToken: {fp['ms_token']}")
    print(f"User-Agent: {fp['user_agent']}")


Q3: ä¸ºä»€ä¹ˆæ¯æ¬¡ç”Ÿæˆçš„a_boguséƒ½ä¸åŒ?
A3: å› ä¸ºç­¾ååŒ…å«æ—¶é—´æˆ³,è¿™æ˜¯æ­£å¸¸çš„ã€‚


Q4: ç­¾åæœ‰æ•ˆæœŸå¤šä¹…?
A4: å»ºè®®å³æ—¶ä½¿ç”¨,ä¸è¦ç¼“å­˜è¶…è¿‡1åˆ†é’Ÿã€‚


Q5: POSTè¯·æ±‚å¦‚ä½•ä½¿ç”¨?
A5:
    # POSTè¯·æ±‚éœ€è¦ä¼ å…¥body
    body = '{"page":1,"limit":20}'
    a_bogus = generate_a_bogus(query, body, user_agent)


Q6: å¦‚ä½•è·å–çœŸå®çš„Cookie?
A6:
    # è®¾ç½®fetch_online=True (éœ€è¦ç½‘ç»œ)
    fp = generate_device_fingerprint(fetch_online=True)
    
    # æˆ–è€…ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿ (æ¨è)
    fp = generate_device_fingerprint(fetch_online=False)

====================================================================
æ ¸å¿ƒæ–‡ä»¶è¯´æ˜
====================================================================

a_bogus.py
  - a_bogusç­¾åç®—æ³•å®ç°
  - è¾“å…¥: query, body, user_agent
  - è¾“å‡º: 44å­—ç¬¦çš„ç­¾åå­—ç¬¦ä¸²
  - ä½¿ç”¨: generate_a_bogus(query, body, ua)

device_fingerprint.py
  - è®¾å¤‡æŒ‡çº¹ç”Ÿæˆå®ç°
  - è¾“å…¥: æ—  (è‡ªåŠ¨ç”Ÿæˆ)
  - è¾“å‡º: åŒ…å«æ‰€æœ‰è®¾å¤‡å‚æ•°çš„å­—å…¸
  - ä½¿ç”¨: generate_device_fingerprint()

simple_test.py
  - å®Œæ•´æµ‹è¯•è„šæœ¬
  - éªŒè¯ç®—æ³•æ­£ç¡®æ€§
  - è¿è¡Œ: python3 simple_test.py

====================================================================
æ€§èƒ½æ•°æ®
====================================================================

a_bogusç”Ÿæˆ: 2.28ms/æ¬¡, 438æ¬¡/ç§’
è®¾å¤‡æŒ‡çº¹ç”Ÿæˆ: <1ms, >1000æ¬¡/ç§’
å†…å­˜å ç”¨: æä½
CPUå ç”¨: æä½

å®Œå…¨æ»¡è¶³å®é™…ä½¿ç”¨éœ€æ±‚!

====================================================================
æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
====================================================================

1. è¿›å…¥æ–‡ä»¶å¤¹:
   cd /Users/cds-dn-141/Downloads/my_golang/cx-spider/python_version

2. å®‰è£…ä¾èµ–:
   pip install -r requirements.txt

3. è¿è¡Œæµ‹è¯•:
   python3 simple_test.py

4. å¤åˆ¶ä»£ç :
   æ‰“å¼€ a_bogus.py å’Œ device_fingerprint.py
   å¤åˆ¶åˆ°ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨

====================================================================
âœ… å·²ç»å‡†å¤‡å¥½äº†,å¯ä»¥ç›´æ¥ä½¿ç”¨!
====================================================================
